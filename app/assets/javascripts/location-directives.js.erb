app.directive('crimes',function(){
  return{
    restrict:'E',
    templateUrl: "<%= asset_path('crime-graph.html') %>"
  }
})

app.directive('stations',function(){
  return{
    restrict:'E',
    templateUrl: "<%= asset_path('closest-stations.html') %>"
  }
})

app.directive('propertyPrices',function(){
  return{
    restrict:'E',
    templateUrl: "<%= asset_path('property-prices.html') %>"
  }
})

app.directive('competitors',function(){
  return{
    restrict:'E',
    templateUrl: "<%= asset_path('competitors.html') %>"
  }
})

app.directive('resultsHeader',function(){
  
  return{
    restrict:'E',
    templateUrl: "<%= asset_path('results-header.html') %>",
    controller: function($scope){
      $scope.description = function(){ //not working
        if (Tab.isSet(1)) return "closest competitors in the area";
        else if (Tab.isSet(2)) return "within a 200m radius of your location";
        else if (Tab.isSet(3)) return "tube and rail stations ranked by distance";
        else if (Tab.isSet(4)) return "average prices in streets in the area now compared to 7 years ago";
      }
    }
  }
})

angular.module('directive.loading', [])
.directive('loading',['$http',function($http){
    return {
      restrict: 'E',
      link: function (scope, elm, attrs){
        scope.isLoading = function () {
            return $http.pendingRequests.length > 0;
        };
        scope.$watch(scope.isLoading, function (v){
          if(v){
            elm.show();
          }else{
            elm.hide();
          }
        });
      },
      templateUrl: "<%= asset_path('loading.html') %>"
    };
}]);

